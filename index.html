<html>
    <head>
        <link rel="stylesheet" href='styles.css'>
        <script src="script.js"></script>
        <title>Study Planner</title>
        <button id="darkModeToggle">Dark Mode</button>
    </head>
    <body>
        <h1 class='product'>STUDY PLANNER</h1>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
        <button id="darkModeToggle">
            <i class="fas fa-moon moon-icon"></i>
        </button>
        <div class="box-container">
            <div class="inputs">
                <div class="input-group">
                    <label for="days">Days until Exam Period:</label>
                    <label><input id="days" placeholder="e.g. 14">Days</label>
                </div>
                <div class="input-group">
                    <label for="studyTime">Study Time per Day:</label>
                    <label><input id="studyTime" placeholder="e.g. 3">Hours per Day</label>
                </div>
                
                <div class="input-group">
                    <label for="subjectInput">Subjects:</label>
                    <input id="subjectInput" placeholder="Calc 2 Assignment">
                    <label><input id='NMR' type="checkbox" value="10">Needs more revision</label>
                    <label><input id='NLR' type='checkbox' value='-10'>Needs less revision</label>
                </div>
                <div class="input-group">
                    <label for="weightageInput">Weightage:</label>
                    <label><input id="weightageInput" placeholder="e.g. 20">%</label>
                </div>            
            </div>  
        </div>
        <div>
            <button onclick="addSubjectandList()">+</button>               
            <p class="lists">
            <label>Subjects:</label><ol id="subjectList"></ol>
            <label>Weightages:</label><ol id="weightageList"></ol> 
            </p>
        </div>
        <div>
            <button onclick="displayOutput()">Submit</button>
            <p class='outputdisplay' id="display"></p>
        </div>

        

        <script>
            const subjectInput = document.getElementById('subjectInput');
            const weightageInput = document.getElementById('weightageInput');

            const subjectList = document.getElementById('subjectList');
            const weightageList = document.getElementById('weightageList');
            var subjectArray = [];
            var weightageArray = [];

            function addSubjectandList() {
                function Is_Alphanumeric(str) {
                    return /^[a-zA-Z0-9]+(\s+[a-zA-Z0-9]+)*$/.test(str);
                }
                const non_empty_value = subjectInput.value.trim();
                const non_empty_value1 = weightageInput.value.trim();

                if (non_empty_value && non_empty_value1) {
                    if (Is_Alphanumeric(non_empty_value) == false) {
                        alert ('Subject must only contain letters and numbers.');
                    }
                    
                    if (isNaN(non_empty_value1)) {
                        alert ('Weightage must only contain numbers.');
                    }
                    if (Is_Alphanumeric(non_empty_value) == true && !isNaN(non_empty_value1)) {
                        /** Add the more revision less revision**/
                        if(NMR.checked && NLR.checked){
                            alert("Both boxes can't be checked!")
                        }

                        if(NMR.checked){
                            const NumberedList = document.createElement('li');
                            NumberedList.textContent = non_empty_value;
                            subjectList.appendChild(NumberedList);
                            subjectArray.push(subjectInput.value);
                            subjectInput.value = '';
                            const NumberedList1 = document.createElement('li');
                            NumberedList1.textContent = non_empty_value1;
                            weightageList.appendChild(NumberedList1);
                            weightageArray.push((weightageInput.value * 1) + 10);
                            weightageInput.value = '';
                        }

                        if(NLR.checked){
                            const NumberedList = document.createElement('li');
                            NumberedList.textContent = non_empty_value;
                            subjectList.appendChild(NumberedList);
                            subjectArray.push(subjectInput.value);
                            subjectInput.value = '';
                            const NumberedList1 = document.createElement('li');
                            NumberedList1.textContent = non_empty_value1;
                            weightageList.appendChild(NumberedList1);
                            weightageArray.push((weightageInput.value * 1) - 10);
                            weightageInput.value = '';
                        }
                        if(!NMR.checked && !NLR.checked){
                            const NumberedList = document.createElement('li');
                            NumberedList.textContent = non_empty_value;
                            subjectList.appendChild(NumberedList);
                            subjectArray.push(subjectInput.value);
                            subjectInput.value = '';
                            const NumberedList1 = document.createElement('li');
                            NumberedList1.textContent = non_empty_value1;
                            weightageList.appendChild(NumberedList1);
                            weightageArray.push((weightageInput.value * 1));
                            weightageInput.value = '';
                        }
                    }
                }

                else {
                    alert ('Please enter a subject and the weightage!!!');
                }
            }
            
            

            function displayOutput(){
                var weightageTotal = 0;
                var daysLeft = document.getElementById('days').value;
                let dL = (1 * daysLeft);
                var studyTimePerDay = document.getElementById('studyTime').value;
                let sTPD = (1 * studyTimePerDay);
                var final = '';

                for (let j=0; j < weightageArray.length; j++){
                    weightageTotal += Number(weightageArray[j]);
                }

                for (let i=0; i < subjectArray.length; i++) {
                    var totalTime = weightageArray[i] / weightageTotal * (dL * sTPD);
                    var studyDays = Math.floor(totalTime / sTPD);
                    studyDays = Math.round(studyDays * 10) / 10;
                    var remainingHours = totalTime % sTPD;
                    remainingHours = Math.round(remainingHours * 10) / 10;
                    final += subjectArray[i] + ': ' + studyDays + ' days ' + remainingHours + ' hours' + "<br>";
                }
                document.getElementById('display').innerHTML = final;
            }
            
        </script>
    </body>
</html>
