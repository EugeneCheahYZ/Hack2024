<html>
    <head>
        <link rel="stylesheet" href='styles.css'>
        <script src="script.js"></script>
        <title>Study Planner</title>
    </head>
    <body>
        <h1 class='product'>STUDY PLANNER</h1>
        <button id="darkModeToggle">Dark Mode</button>
        <div class="box-container">
            <div class="inputs">
                <div class="input-group">
                    <label id ="input1">Days until Exam Period:</label>
                    <input id="days">
                </div>
                <div class="input-group">
                    <label id ="input2">Study Time per Day:</label>
                    <input id="studyTime">
                </div>
                
                <div class="input-group">
                    <label id ="input3">Subjects:</label>
                    <input id="subjectInput">
                </div>
                <div class="input-group">
                    <label id ="input">Weightage:</label>
                    <input id="weightageInput">
                </div>            
            </div>  
        </div>
        <div>
            <button id="addButton" onclick="addSubjectandList()">+</button>               
            <div class="lists">
                <label>Subjects:</label><ol id="subjectList"></ol>
                <label>Weightages:</label><ol id="weightageList"></ol> 
            </div>
        </div>
        <div>
            <button id="submitBtn" onclick="displayOutput()">Submit</button>
            <p class='outputdisplay' id="display"></p>
        </div>
        <script>
            const subjectInput = document.getElementById('subjectInput');
            const weightageInput = document.getElementById('weightageInput');
            const examP = document.getElementById('days');
            const sTime = document.getElementById('studyTime');

            const subjectList = document.getElementById('subjectList');
            const weightageList = document.getElementById('weightageList');
            var subjectArray = [];
            var weightageArray = [];

            function addSubjectandList() {
                function Is_Alphanumeric(str) {
                    return /^[a-zA-Z0-9]+(\s+[a-zA-Z0-9]+)*$/.test(str);
                }
                const non_empty_value = subjectInput.value.trim();
                const non_empty_value1 = weightageInput.value.trim();
                const non_empty_value2 = examP.value.trim();
                const non_empty_value3 = sTime.value.trim();

                if (isNaN(non_empty_value2) || !non_empty_value2) {
                    alert ('This field only accepts numbers.');
                }
                if (isNaN(non_empty_value3) || !non_empty_value3) {
                    alert ('This field only accepts numbers.');
                }
                if (non_empty_value && non_empty_value1) {
                    if (Is_Alphanumeric(non_empty_value) == false) {
                        alert ('Subject must only contain letters and numbers.');
                    }
                    
                    if (isNaN(non_empty_value1)) {
                        alert ('Weightage must only contain numbers.');
                    }
                    if (Is_Alphanumeric(non_empty_value) == true && !isNaN(non_empty_value1)) {
                        const NumberedList = document.createElement('li');
                        NumberedList.textContent = non_empty_value;
                        subjectList.appendChild(NumberedList);
                        subjectArray.push(subjectInput.value);
                        subjectInput.value = '';
                        const NumberedList1 = document.createElement('li');
                        NumberedList1.textContent = non_empty_value1;
                        weightageList.appendChild(NumberedList1);
                        weightageArray.push(weightageInput.value);
                        weightageInput.value = '';
                        
                    }
                }

                else {
                    alert ('Please enter a subject and the weightage!!!');
                }
            }
            
            

            function displayOutput(){
                var weightageTotal = 0;
                var daysLeft = document.getElementById('days').value;
                let dL = (1 * daysLeft);
                var studyTimePerDay = document.getElementById('studyTime').value;
                let sTPD = (1 * studyTimePerDay);
                var final = '';

                for (let j=0; j < weightageArray.length; j++){
                    weightageTotal += Number(weightageArray[j]);
                }

                for (let i=0; i < subjectArray.length; i++) {
                    var totalTime = weightageArray[i] / weightageTotal * (dL * sTPD);
                    var studyDays = Math.floor(totalTime / sTPD);
                    studyDays = Math.round(studyDays * 10) / 10;
                    var remainingHours = totalTime % sTPD;
                    remainingHours = Math.round(remainingHours * 10) / 10;
                    final += subjectArray[i] + ': ' + studyDays + ' days ' + remainingHours + ' hours' + "<br>";
                }
                document.getElementById('display').innerHTML = final;
            }
            
        </script>
    </body>
</html>